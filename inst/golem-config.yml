default:
  golem_name: investR
  golem_version: 0.0.0.9000
  app_prod: no

  # Custom ticker lists (shared across strategies)
  custom_ticker_lists:
    ticker_cache_hours: 24
    overbought_url: "https://stockanalysis.com/list/overbought-stocks/"
    oversold_url: "https://stockanalysis.com/list/oversold-stocks/"
    most_shorted_url: "https://stockanalysis.com/list/most-shorted-stocks/"
    leveraged_2x_url: "https://www.2xetfs.com/"
    leveraged_3x_url: "https://3xetf.com/"

  # Shared constants across all strategies
  shared:
    days_per_year: 365
    trading_days_per_year: 252
    default_max_workers: 4
    max_workers_limit: 10
    min_workers: 1

  # Aristocrats strategy configuration
  aristocrats:
    max_workers: 10
    max_stock_price: 300
    strike_threshold_pct: 0.8
    target_days: null
    min_aristocrats: 50
    min_dividend_quarters: 4
    min_option_bid: 0.01
    min_open_interest: 0
    sgov_yield_default: 0.05
    shares_per_contract: 100
    history_years: 5
    short_expiry_warning_days: 14
    negative_return_threshold: 0
    low_dividend_threshold: 0.5
    error_truncate_length: 50
    max_sgov_yield_sanity: 0.20
    default_top_n: 10
    output_dir: strategies

  # Weekly dividend capture strategy configuration
  weekly_capture:
    weeks_per_year: 52
    investment_amount: 10000
    min_dividend_events: 5
    min_success_rate: 70.0
    exclude_negative_returns: true
    rate_limit_seconds: 2
    max_workers: 4
    # Dynamic ticker fetching configuration
    ticker_source_url: "https://stockanalysis.com/list/weekly-dividend-etfs/"
    ticker_cache_hours: 24
    use_dynamic_tickers: true
    # Fallback tickers if scraping fails (known stable tickers)
    fallback_tickers:
      - QQQY
      - XDTE
      - WDTE
      - QDTE
      - ULTY
      - YMAX
      - YMAG

  # Monthly dividend capture strategy configuration
  monthly_capture:
    months_per_year: 12
    investment_amount: 10000
    min_dividend_events: 5
    min_success_rate: 70.0
    exclude_negative_returns: true
    rate_limit_seconds: 2
    max_workers: 4

  # Monthly high-yield dividend capture strategy configuration
  monthly_high_yield_capture:
    months_per_year: 12
    investment_amount: 10000
    min_dividend_events: 5
    min_yield_pct: 8.0
    min_success_rate: 70.0
    exclude_negative_returns: true
    rate_limit_seconds: 2
    max_workers: 4
    # Dynamic ticker fetching configuration
    ticker_source_url: "https://stockanalysis.com/list/monthly-dividend-etfs/"
    ticker_cache_hours: 24
    use_dynamic_tickers: true
    # Fallback tickers if scraping fails (known high-yield monthly payers)
    fallback_tickers:
      - QYLD
      - XYLD
      - RYLD
      - JEPI
      - JEPQ
      - FEPI
      - SPYI

  # Put Calendar Spread strategy configuration
  put_calendar_spread:
    strike_pct: 0.95  # 95% = ATM (optimal for dividend aristocrats)
    short_expiry_min_days: 20  # Front month minimum
    short_expiry_max_days: 45  # Front month maximum
    short_expiry_target_days: 30  # Target 30 DTE
    long_expiry_min_days: 50  # Back month minimum
    long_expiry_max_days: 120  # Back month maximum
    long_expiry_target_days: 60  # Target 60 DTE (2:1 ratio)
    min_expiry_ratio: 1.5  # Long DTE >= 1.5x short DTE
    max_workers: 10
    min_option_bid: 0.05  # Higher min bid for spreads
    min_open_interest: 100  # Higher OI for liquidity
    max_stock_price: 300
    shares_per_contract: 100
    days_per_year: 365
    profit_target_conservative: 0.15  # 15% of debit
    profit_target_standard: 0.20  # 20% of debit
    profit_target_aggressive: 0.25  # 25% of debit
    iv_rank_excellent: 0.20  # <20% = excellent for calendars
    iv_rank_good: 0.30
    iv_rank_acceptable: 0.40
    default_top_n: 10
    output_dir: strategies

  # Zero-dividend strategy configuration
  zero_dividend:
    max_workers: 10
    strike_threshold_pct: 0.85  # Deeper ITM than aristocrats
    min_days: 45  # Minimum days to expiry
    max_days: 120  # Maximum days to expiry
    min_option_bid: 0.01
    min_open_interest: 10  # Minimum 10 contracts for liquidity
    max_stock_price: 300  # Maximum stock price filter
    shares_per_contract: 100
    history_years: 5
    cache_ttl_days: 30
    short_expiry_warning_days: 14
    negative_return_threshold: 0
    error_truncate_length: 50
    default_top_n: 10
    output_dir: strategies

  # High-yield dividend capture strategy configuration (Russell 2000, etc.)
  high_yield_capture:
    investment_amount: 10000
    default_yield_threshold: 10.0
    min_yield_threshold: 5.0
    max_yield_threshold: 20.0
    min_dividend_events: 5
    min_success_rate: 70.0
    exclude_negative_returns: true
    max_days_until_ex_div: 2
    max_workers: 4

  # Dynamic covered calls strategy configuration
  dynamic_covered_calls:
    max_workers: 4  # Balanced parallel processing (increased from 1)
    default_max_price: 250  # Default maximum stock price filter
    default_lookback_years: 5  # Years of history for drawdown calculation
    default_min_strike_pct: 0.50  # Minimum strike as % of current price
    default_max_strike_pct: 0.95  # Maximum strike as % of current price
    min_target_days: 30  # Minimum days to expiry
    max_target_days: 730  # Maximum days to expiry (2 years)
    expiration_filter_tolerance: 0.50  # +/- 50% tolerance for expiration filtering (reduced from 100%)
    rate_limit_seconds: 0.5  # Delay between stocks (reduced from 1.0)
    min_option_bid: 0.01
    min_open_interest: 0
    min_option_volume: 10  # Minimum average option volume for pre-filtering
    shares_per_contract: 100
    negative_return_threshold: 0
    error_truncate_length: 50
    default_top_n: 10
    output_dir: strategies
    cache_enabled: true  # Enable session-level caching
    cache_ttl_hours: 8  # Cache valid for 8 hours (trading day)
    enable_async: true  # Enable async analysis in Shiny

  # Collar strategy configuration
  collar:
    max_workers: 10
    min_net_credit: 0.01
    min_open_interest: 10
    max_stock_price: 1000
    shares_per_contract: 100
    history_years: 5
    cache_ttl_days: 30
    sgov_yield_default: 0.0414
    max_sgov_yield_sanity: 0.15
    negative_return_threshold: 0
    error_truncate_length: 50
    default_top_n: 50
    output_dir: strategies
    # Liquid ETFs configuration
    min_market_cap: 1000000000  # $1 billion
    min_avg_volume: 1000000  # 1 million shares

  # Cash equivalent (money market) tickers configuration
  # These tickers are treated specially: no expiration required, SEC yield for returns
  cash_equivalents:
    tickers:
      - SGOV       # iShares 0-3 Month Treasury Bond ETF
      - ZMMK.TO    # BMO Money Market ETF (CAD)
      - BIL        # SPDR Bloomberg 1-3 Month T-Bill ETF
      - WEEK       # SPDR 1-3 Month T-Bill ETF (Weekly)
      - JMMF       # JPMorgan Money Market ETF
      - MMKT       # First Trust Money Market ETF
      - TBLL       # iShares Treasury Bill ETF
      - USFR       # WisdomTree Floating Rate Treasury Fund
      - GSY        # Invesco Ultra Short Duration ETF
      - ARCM       # Arrow Reserve Capital Management ETF

  # Portfolio management configuration
  portfolio:
    database_path: portfolio.duckdb  # DuckDB file name (stored in inst/database/)
    stale_threshold_minutes: 15  # Auto-refresh if data older than this
    default_visible_columns:
      - symbol
      - group_name
      - open_quantity
      - current_price
      - average_entry_price
      - current_market_value
      - total_cost
    groups:
      strategy_types:
        - "Dividend Aristocrats"
        - "Zero-Dividend Stocks"
        - "Dynamic Covered Calls"
        - "Legacy Covered Call"
        - "S&P 500 Cash-Secured Puts"
        - "Put Calendar Spread"
        - "Collar Strategy"
        - "Weekly Dividend Capture"
        - "Monthly Dividend Capture"
        - "Russell 2000 High-Yield"
        - "Other"
      position_roles:
        - "underlying_stock"
        - "short_call"
        - "short_put"
      match_confidence_threshold: 0.7

production:
  app_prod: yes

dev:
  golem_wd: !expr here::here()